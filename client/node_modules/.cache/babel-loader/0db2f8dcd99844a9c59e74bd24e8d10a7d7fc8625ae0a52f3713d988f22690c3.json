{"ast":null,"code":"var _jsxFileName = \"/Users/shadownight/Documents/react-app/client/src/components/Admin/AdminRoute.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AccessDeniedContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 60vh;\n  text-align: center;\n  padding: 2rem;\n`;\n_c = AccessDeniedContainer;\nconst AccessDeniedTitle = styled.h1`\n  font-size: 3rem;\n  color: ${props => props.theme.colors.error};\n  margin-bottom: 1rem;\n`;\n_c2 = AccessDeniedTitle;\nconst AccessDeniedMessage = styled.p`\n  font-size: 1.125rem;\n  color: ${props => props.theme.colors.textMuted};\n  margin-bottom: 2rem;\n  max-width: 500px;\n`;\n_c3 = AccessDeniedMessage;\nconst BackButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  background: ${props => props.theme.colors.primary};\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.theme.colors.primaryDark};\n  }\n`;\n_c4 = BackButton;\nconst AdminRoute = ({\n  children,\n  requiredRole = 'admin'\n}) => {\n  _s();\n  const {\n    user,\n    loading,\n    isAuthenticated\n  } = useAuth();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      fullScreen: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Проверка роли пользователя\n  const hasAccess = () => {\n    if (!(user !== null && user !== void 0 && user.role)) return false;\n    if (Array.isArray(requiredRole)) {\n      return requiredRole.includes(user.role);\n    }\n    return user.role === requiredRole;\n  };\n  if (!hasAccess()) {\n    return /*#__PURE__*/_jsxDEV(AccessDeniedContainer, {\n      children: [/*#__PURE__*/_jsxDEV(AccessDeniedTitle, {\n        children: \"403\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AccessDeniedMessage, {\n        children: [\"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u0447\\u043D\\u043E \\u043F\\u0440\\u0430\\u0432 \\u0434\\u043B\\u044F \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430 \\u043A \\u044D\\u0442\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0435. \\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F \\u0440\\u043E\\u043B\\u044C: \", Array.isArray(requiredRole) ? requiredRole.join(' или ') : requiredRole]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BackButton, {\n        onClick: () => window.history.back(),\n        children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_s(AdminRoute, \"6p8hbW7qQFb//Z8SqvljA2tLdrc=\", false, function () {\n  return [useAuth];\n});\n_c5 = AdminRoute;\nexport default AdminRoute;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"AccessDeniedContainer\");\n$RefreshReg$(_c2, \"AccessDeniedTitle\");\n$RefreshReg$(_c3, \"AccessDeniedMessage\");\n$RefreshReg$(_c4, \"BackButton\");\n$RefreshReg$(_c5, \"AdminRoute\");","map":{"version":3,"names":["React","Navigate","useAuth","LoadingSpinner","styled","jsxDEV","_jsxDEV","AccessDeniedContainer","div","_c","AccessDeniedTitle","h1","props","theme","colors","error","_c2","AccessDeniedMessage","p","textMuted","_c3","BackButton","button","primary","primaryDark","_c4","AdminRoute","children","requiredRole","_s","user","loading","isAuthenticated","fullScreen","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","hasAccess","role","Array","isArray","includes","join","onClick","window","history","back","_c5","$RefreshReg$"],"sources":["/Users/shadownight/Documents/react-app/client/src/components/Admin/AdminRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport styled from 'styled-components';\n\nconst AccessDeniedContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 60vh;\n  text-align: center;\n  padding: 2rem;\n`;\n\nconst AccessDeniedTitle = styled.h1`\n  font-size: 3rem;\n  color: ${props => props.theme.colors.error};\n  margin-bottom: 1rem;\n`;\n\nconst AccessDeniedMessage = styled.p`\n  font-size: 1.125rem;\n  color: ${props => props.theme.colors.textMuted};\n  margin-bottom: 2rem;\n  max-width: 500px;\n`;\n\nconst BackButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  background: ${props => props.theme.colors.primary};\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.theme.colors.primaryDark};\n  }\n`;\n\nconst AdminRoute = ({ children, requiredRole = 'admin' }) => {\n  const { user, loading, isAuthenticated } = useAuth();\n\n  if (loading) {\n    return <LoadingSpinner fullScreen />;\n  }\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Проверка роли пользователя\n  const hasAccess = () => {\n    if (!user?.role) return false;\n    \n    if (Array.isArray(requiredRole)) {\n      return requiredRole.includes(user.role);\n    }\n    \n    return user.role === requiredRole;\n  };\n\n  if (!hasAccess()) {\n    return (\n      <AccessDeniedContainer>\n        <AccessDeniedTitle>403</AccessDeniedTitle>\n        <AccessDeniedMessage>\n          У вас недостаточно прав для доступа к этой странице. \n          Требуется роль: {Array.isArray(requiredRole) ? requiredRole.join(' или ') : requiredRole}\n        </AccessDeniedMessage>\n        <BackButton onClick={() => window.history.back()}>\n          Вернуться назад\n        </BackButton>\n      </AccessDeniedContainer>\n    );\n  }\n\n  return children;\n};\n\nexport default AdminRoute; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}